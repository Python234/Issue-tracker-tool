'use strict';$(document).ready(()=>{function a(c){return c=c.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'),c.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(d){var f='number';return /^"/.test(d)?/:$/.test(d)?f='key':f='string':/true|false/.test(d)?f='boolean':/null/.test(d)&&(f='null'),'<span class="'+f+'">'+d+'</span>'})}let b='';$('#new-project').on('submit',c=>{c.preventDefault();const d={project_name:c.target.project_name.value};$.ajax({method:'POST',contentType:'application/json',url:window.location+'api/issues/new_project',data:JSON.stringify(d),dataType:'json',success:f=>{''==b&&($('h1').addClass('float'),$('#list-link').append('<a>List all issues</a>'));$('h1').text(f.project_name.toUpperCase()+' ISSUE TRACKER'),$('ul').append('<li>'+f.project_name+'</li>'),$('a').attr('href','/api/issues'+f.project_name),$('#response-container').removeClass('error').addClass('nomal'),$('#response-text').html(f.responseText),b=f.project_name,c.target.reset()},error:f=>{$('#response-container').removeClass('nomal').addClass('error'),$('#response-text').html(f.responseText)}})}),$('#create').on('submit',c=>{if(c.preventDefault(),''!==b){console.log(''===c.target.assigned_to.value?void 0:'isDefined');const d={issue_title:c.target.issue_title.value,issue_text:c.target.issue_text.value,created_by:c.target.created_by.value,assigned_to:''===c.target.assigned_to.value?void 0:c.target.assigned_to.value,status_text:''===c.target.status_text.value?void 0:c.target.status_text.value};$.ajax({method:'POST',contentType:'application/json',url:window.location+'/api/issues/'+b,data:JSON.stringify(d),dataType:'json',success:f=>{$('#response-container').removeClass('error').addClass('nomal'),$('#response-text').html(a(JSON.stringify(f,null,2))),c.target.reset()},error:f=>{$('#response-container').removeClass('nomal').addClass('error'),$('#response-text').html(f.responseText)}})}else $('#response-container').removeClass('nomal').addClass('error'),$('#response-text').html('Select a project first from the left pane')}),$('#update').on('submit',c=>{if(c.preventDefault(),''!==b){const d={issue_id:c.target.issue_id.value,issue_title:''==c.target.issue_title.value?void 0:c.target.issue_title.value,issue_text:''==c.target.issue_text.value?void 0:c.target.issue_text.value,created_by:''==c.target.created_by.value?void 0:c.target.created_by.value,assigned_to:''==c.target.assigned_to.value?void 0:c.target.assigned_to.value,status_text:''==c.target.status_text.value?void 0:c.target.status_text.value,open:!c.target.closed.checked&&void 0};$.ajax({method:'PUT',contentType:'application/json',url:window.location+'api/issues/'+b,data:JSON.stringify(d),dataType:'json',success:f=>{$('#response-container').removeClass('error').addClass('nomal'),$('#response-text').html(f.responseText),c.target.reset()},error:f=>{$('#response-container').removeClass('nomal').addClass('error'),$('#response-text').html(f.responseText)}})}else $('#response-container').removeClass('nomal').addClass('error'),$('#response-text').html('Select a project first from the left pane')}),$('#delete').on('submit',c=>{if(c.preventDefault(),''!==b){var d={issue_id:c.target.issue_id.value};$.ajax({method:'DELETE',contentType:'application/json',url:window.location+'/api/issues/'+b,data:JSON.stringify(d),dataType:'json',success:f=>{f.success?($('#response-container').removeClass('error').addClass('nomal'),$('#response-text').html(a(JSON.stringify(f,null,2))),c.target.reset()):($('#response-container').removeClass('nomal').addClass('error'),$('#response-text').html(a(JSON.stringify(f,null,2))))},error:f=>{$('#response-container').removeClass('nomal').addClass('error'),$('#response-text').html(f.responseText)}})}else $('#response-container').removeClass('nomal').addClass('error'),$('#response-text').html('Select a project first from the left pane')}),$('ul').on('click','li',c=>{console.log('clicked: '+c),''===b&&($('h1').addClass('float'),$('#list-link').append('<a>List all issues</a>')),b=$('#'+c.target.id).text(),$('h1').text(b.toUpperCase()+' ISSUE TRACKER'),$('a').attr('href','/api/issues/'+b)})});